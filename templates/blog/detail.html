<!DOCTYPE html>
<html lang="ko" class="h-full" data-page="blog-detail">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>{{ post.title }} - CareBridge 블로그</title>
    <meta name="description" content="{{ post.excerpt|truncatechars:155 }}">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="{{ post.title }}"/>
    <meta property="og:description" content="{{ post.excerpt|truncatechars:180 }}"/>
    <meta property="og:url" content="{{ request.build_absolute_uri }}"/>
    {% if post.cover_image %}<meta property="og:image" content="{{ post.cover_image.url }}"/>{% endif %}
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="{{ post.title }}"/>
    <meta name="twitter:description" content="{{ post.excerpt|truncatechars:180 }}"/>
    {% if post.cover_image %}<meta name="twitter:image" content="{{ post.cover_image.url }}"/>{% endif %}
    <script type="application/ld+json">{
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "{{ post.title|escapejs }}",
      "datePublished": "{{ post.published_at|date:'c' }}",
      "dateModified": "{{ post.updated_at|date:'c' }}",
      "author": {"@type": "Organization", "name": "CareBridge"},
      {% if post.cover_image %}"image": ["{{ request.scheme }}://{{ request.get_host }}{{ post.cover_image.url }}"],{% endif %}
      "mainEntityOfPage": {"@type": "WebPage", "@id": "{{ request.build_absolute_uri }}"}
    }</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-ZqPRXU19HhYbjFFBXd+nSyfJYWtTybcEjhKiUNbhtS/dG4AkyBIPrn4lFE8qOK2vPGOBiRWbYa7N4IcdOx6G2w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body{font-family:'Pretendard',-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Helvetica Neue',Arial,sans-serif;}
        .prose h2{margin-top:3rem;font-size:1.5rem;font-weight:700;}
        .prose h3{margin-top:2rem;font-size:1.2rem;font-weight:600;}
        .prose p{margin:1rem 0;line-height:1.75;}
        .prose blockquote{margin:1.5rem 0;padding:1rem 1.25rem;border-left:4px solid #6366f1;background:rgba(99,102,241,0.05);font-style:italic;border-radius:.5rem;}
        .prose img{border-radius:1rem;margin:2rem auto;}
        .prose pre{background:#1e293b !important;color:#f8fafc;font-size:.85rem;border-radius:1rem;padding:1rem 1.25rem;overflow-x:auto;}
        .hdr{transition:height .2s ease, box-shadow .2s ease, background .2s ease;}
        .hdr:not(.shrink){height:70px;}
        .hdr.shrink{height:56px;}
    </style>
</head>
<body class="min-h-full bg-white text-slate-900 antialiased selection:bg-indigo-200/60">
<header id="siteHeader" class="hdr sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200 flex flex-col justify-center">{% include 'core/_navbar.html' %}</header>
<main class="px-5 py-10">
    <article class="max-w-4xl mx-auto">
        <header class="mb-10 space-y-6">
            <div class="flex flex-wrap gap-2">
                {% if post.category %}<a href="{% url 'blog:list' %}?category={{ post.category.slug }}" class="px-3 py-1 text-[11px] rounded-full bg-indigo-50 text-indigo-600 font-medium">{{ post.category.name }}</a>{% endif %}
                {% for t in post.tags.all %}<a href="{% url 'blog:list' %}?tag={{ t.slug }}" class="px-3 py-1 text-[11px] rounded-full bg-slate-100 text-slate-600">#{{ t.name }}</a>{% endfor %}
            </div>
            <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-tight text-center">{{ post.title }}</h1>
            <div class="flex flex-wrap gap-3 text-xs text-slate-500 justify-center">
                <span>{{ post.published_at|date:'Y.m.d H:i' }}</span>
            </div>
            {% if post.cover_image %}
            <figure class="rounded-2xl overflow-hidden shadow-sm border border-slate-200">
                <img src="{{ post.cover_image.url }}" alt="{{ post.title }}" class="w-full aspect-video object-cover" loading="lazy">
            </figure>
            {% endif %}
        </header>
        <div id="post-content" class="prose prose-indigo max-w-none">{{ post.content|safe }}</div>
        <hr class="my-12 border-slate-200">
        <footer class="space-y-8">
            <section aria-label="태그" class="flex flex-wrap gap-2"> <!-- justify-center 제거 -->
                {% for t in post.tags.all %}<a href="{% url 'blog:list' %}?tag={{ t.slug }}" class="px-3 py-1 rounded-full bg-slate-100 text-slate-600 text-[11px]">#{{ t.name }}</a>{% empty %}<span class="text-xs text-slate-400">태그 없음</span>{% endfor %}
            </section>
            <section aria-label="공유" class="flex flex-wrap gap-3"> <!-- justify-center 제거 -->
                <button type="button" data-share="copy" class="px-4 h-10 rounded-xl bg-indigo-600 text-white text-xs font-semibold hover:bg-indigo-700">링크 복사</button>
            </section>
            <nav aria-label="이전 다음" class="grid gap-4 md:grid-cols-2">
                {% if prev_post %}
                <a href="{{ prev_post.get_absolute_url }}" class="group p-4 rounded-2xl border border-slate-200 bg-white hover:border-indigo-400 transition flex flex-col">
                    <span class="text-[11px] font-semibold text-indigo-600 tracking-wide">이전 글</span>
                    <span class="mt-1 text-sm font-medium leading-snug line-clamp-2">{{ prev_post.title }}</span>
                </a>
                {% endif %}
                {% if next_post %}
                <a href="{{ next_post.get_absolute_url }}" class="group p-4 rounded-2xl border border-slate-200 bg-white hover:border-indigo-400 transition flex flex-col md:items-end text-right">
                    <span class="text-[11px] font-semibold text-indigo-600 tracking-wide">다음 글</span>
                    <span class="mt-1 text-sm font-medium leading-snug line-clamp-2">{{ next_post.title }}</span>
                </a>
                {% endif %}
            </nav>
        </footer>
    </article>
</main>
{% include 'core/_footer.html' %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-ZqPRXU19HhYbjFFBXd+nSyfJYWtTybcEjhKiUNbhtS/dG4AkyBIPrn4lFE8qOK2vPGOBiRWbYa7N4IcdOx6G2w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
// 공유 버튼
(function(){const btn=document.querySelector('[data-share=copy]'); if(!btn)return; btn.addEventListener('click',()=>{navigator.clipboard.writeText(window.location.href).then(()=>{btn.textContent='복사 완료'; setTimeout(()=>btn.textContent='링크 복사',2000);});});})();
// 헤더 shrink & shadow
const headerEl=document.getElementById('siteHeader'); function onScroll(){ if(window.scrollY>16){headerEl.classList.add('shrink','shadow-sm');} else {headerEl.classList.remove('shrink','shadow-sm');} } window.addEventListener('scroll',onScroll); onScroll();
</script>
</body>
</html>
